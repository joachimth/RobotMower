; PlatformIO Project Configuration File
;
; Perimeter Wire Sender - ESP32
;
; Controller til perimeterkabel signalgenerator med web API

[platformio]
default_envs = esp32dev

[env:esp32dev]
; Brug community fork for Arduino Core 3.3.3 support
platform = https://github.com/pioarduino/platform-espressif32/releases/download/stable/platform-espressif32.zip
board = esp32dev
framework = arduino

; Baud rate til serial monitor
monitor_speed = 115200

; Upload speed
upload_speed = 921600

; Build flags
build_flags =
    -DCORE_DEBUG_LEVEL=0
    -DBOARD_HAS_PSRAM=0
    -Os

; Libraries
lib_deps =
    mathieucarbou/AsyncTCP@^3.2.14
    mathieucarbou/ESPAsyncWebServer@^3.4.8
    bblanchon/ArduinoJson@^7.2.1

; Filesystem for web files (LittleFS)
board_build.filesystem = littlefs
board_build.partitions = no_ota.csv

; Upload protocol
upload_protocol = esptool

[env:esp32dev-ota]
extends = env:esp32dev
upload_protocol = espota
upload_port = perimeter-sender.local
upload_flags =
    --port=3232
    --auth=perimeter2024
