; PlatformIO Project Configuration File
;
; Robot Plæneklipper - ESP32-WROOM-32U
;
; Dette projekt kan også bygges med Arduino IDE, men PlatformIO
; giver bedre dependency management og build automation.

[platformio]
default_envs = esp32dev

[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino

; Baud rate til serial monitor
monitor_speed = 115200

; Upload speed (kan sættes lavere hvis der er problemer)
upload_speed = 921600

; Build flags
build_flags =
    -DCORE_DEBUG_LEVEL=0
    -DBOARD_HAS_PSRAM=0
    -Os  ; Optimize for size

; Libraries
; Brug de samme versioner som anbefalet i README
lib_deps =
    mathieucarbou/AsyncTCP@^3.2.14
    mathieucarbou/ESPAsyncWebServer@^3.4.8
    bblanchon/ArduinoJson@^7.2.1
    hideakitai/MPU9250@^0.4.7
    adafruit/Adafruit MPU6050@^2.3.0
    adafruit/Adafruit Unified Sensor@^1.1.14
    espressif/esp32_https_client@^1.0.0

; Filesystem for web files (LittleFS)
board_build.filesystem = littlefs
board_build.partitions = default.csv

; OTA Settings
; Disse bruges til at uploade via network i stedet for USB
upload_protocol = esptool
; Uncomment for OTA upload:
; upload_protocol = espota
; upload_port = robot-mower.local
; upload_flags =
;     --port=3232
;     --auth=robot2024

[env:esp32dev-ota]
extends = env:esp32dev
upload_protocol = espota
upload_port = robot-mower.local
upload_flags =
    --port=3232
    --auth=robot2024

; Environment for building filesystem image
[env:esp32dev-fs]
extends = env:esp32dev
board_build.filesystem = littlefs
